let link=getUrl(),str=get(link),cells=JSON.parse(str).cells,slides=!1;loadTableView(),setDarkMode(),hideIButton(),window.addEventListener("popstate",a=>{parseCells(a.state)});function addClickEvent(a){var b=document.getElementById(a);cells[a].link&&(b.onclick=function(){window.open(cells[a].link)})}function addNewPageEvent(a){var b=document.getElementById(a);b.onclick=function(){history.pushState(cells[a].link,cells[a].title,"https://collegemont-royal.github.io?src="+cells[a].link),slideLeft(),slides=!0,setTimeout(function(){parseCells(cells[a].link)},300)}}function addHoverEvent(a){var b=document.getElementById(a);cells[a].link&&(b.onmouseover=function(){b.classList.remove("mouseOut","mouseOver"),b.classList.add("mouseOver")},b.onmouseout=function(){b.classList.remove("mouseOut","mouseOver"),b.classList.add("mouseOut")})}document.getElementsByClassName("i")[0].onclick=function(){popupwindow("https://collegemont-royal.github.io/?src=https://collegemont-royal.github.io/files/infos.json","CMR - Informations",400,600)},document.getElementsByClassName("logo")[0].onclick=function(){window.location="https://collegemont-royal.github.io"};function parseCells(){link=getUrl(),str=get(link),cells=JSON.parse(str).cells,loadTableView()}function loadTableView(){document.getElementsByClassName("cells")[0].innerHTML="",setTitle();for(let a,b=0;b<cells.length;b++)a="mouseOut",cells[b].notification&&(a+=" notification"),cells[b].article&&(a+=" article"),cells[b].subtitle=markDown(cells[b].subtitle),document.getElementsByClassName("cells")[0].insertAdjacentHTML("beforeend",GenerateHTMLCell(cells[b].title,cells[b].subtitle,cells[b].image,b,a)),addHoverEvent(b),cells[b].newPage?addNewPageEvent(b):addClickEvent(b);fadeIn()}function slideLeft(){var a=document.getElementsByTagName("cell");for(let b=0;b<a.length;b++)a[b].classList.remove("transitionLeft","mouseOver","mouseOut"),a[b].classList.add("transitionLeft","mouseOut")}function fadeIn(){if(slides){slides=!1;var a=document.getElementsByTagName("cell");for(let b=0;b<a.length;b++)a[b].classList.remove("fadeIn"),a[b].classList.add("fadeIn")}}function GenerateHTMLCell(a,b,c,d,e){return a=a||"",b=b||"",c=c||"\uD83C\uDF86",0<c.indexOf(".")?`<cell id = ${d} class="${e}"><img-container><img src="${c}" id=${c}/></img-container><description><cell-title>${a}</cell-title><cell-subtitle>${b}</cell-subtitle></description></cell>`:`<cell id = ${d} class="${e}"><emoji>${c}</emoji><description><cell-title>${a}</cell-title><cell-subtitle>${b}</cell-subtitle></description></cell>`}function setDarkMode(){window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}function setTitle(){let a=JSON.parse(str).title||"Application CMR";document.getElementsByClassName("title")[0].innerHTML=a,document.title=""==a?"CMR":"CMR - "+a}function hideIButton(){"https://collegemont-royal.github.io/files/infos.json"==link?(console.log("hidden"),document.getElementsByClassName("i")[0].id="hidden"):document.getElementsByClassName("i")[0].id=""}function getUrl(){const a=new URLSearchParams(window.location.search).get("src");return null==history.state?null==a?"https://collegemont-royal.github.io/files/cells.json":a:history.state}function get(a){var b=new XMLHttpRequest;return b.open("GET",a,!1),b.send(null),b.responseText}function isEmoji(a){return!!a.match(["(?:[\u2700-\u27BF]|(?:\uD83C[\uDDE6-\uDDFF]){2}|[\uD800-\uDBFF][\uDC00-\uDFFF]|[#-9]\uFE0F?\u20E3|\u3299|\u3297|\u303D|\u3030|\u24C2|\uD83C[\uDD70-\uDD71]|\uD83C[\uDD7E-\uDD7F]|\uD83C\uDD8E|\uD83C[\uDD91-\uDD9A]|\uD83C[\uDDE6-\uDDFF]|[\uD83C[\uDE01-\uDE02]|\uD83C\uDE1A|\uD83C\uDE2F|[\uD83C[\uDE32-\uDE3A]|[\uD83C[\uDE50-\uDE51]|\u203C|\u2049|[\u25AA-\u25AB]|\u25B6|\u25C0|[\u25FB-\u25FE]|\xA9|\xAE|\u2122|\u2139|\uD83C\uDC04|[\u2600-\u26FF]|\u2B05|\u2B06|\u2B07|\u2B1B|\u2B1C|\u2B50|\u2B55|\u231A|\u231B|\u2328|\u23CF|[\u23E9-\u23F3]|[\u23F8-\u23FA]|\uD83C\uDCCF|\u2934|\u2935|[\u2190-\u21FF])"].join("|"))}function markDown(a){if(a){var b=a.replace(/\*\*(.*?)\*\*/gm,"<b>$1</b>"),c=b.replace(/\*(.*?)\*/gm,"<i>$1</i>"),d=c.replace(/\n/g,"<br>");return d}}function popupwindow(a,b,c,d){var e=screen.width/2-c/2,f=screen.height/2-d/2;return window.open(a,b,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+c+", height="+d+", top="+f+", left="+e)}